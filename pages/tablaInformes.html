<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conexion | Informes</title>
    <link rel="shortcut icon" href="https://conexion-hr.com/wp-content/uploads/2022/04/conexion-hr-favicon.png" sizes="32x32">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <link href="../css/bootstrap-sidebar.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
</head>
<body class="bodyInformes">
    <header>
        <nav class="navbar navbar-fixed-top">
            <div class="navbar-header">
              <a href="./home.html"><img class="logo" src="https://conexion-hr.com/wp-content/uploads/2022/01/conexion-hr-w-bb-300x47.png" alt="logo"></a>
            </div>
              <ul class="buttonOff">
                <li class="dropdown singOffAndButtonOff">
                   <a class="singOff" href="../index.html"><span class="glyphicon glyphicon-off" style="color: white;" aria-hidden="true"></span></a>
                </li>
              </ul>
        </nav>
    </header>
    <main>
        <div class="contenedorTabla">
            <table id="tableInfRevisar" class="display tablaBusquedas">
                <thead>
                    <tr>
                        <th style="text-align: center; background-color:#261e65f7;" >Columna 1</th>
                        <th class="tituloCol" >Fecha</th>
                        <th style="text-align: center; background-color:#4a3ea1f7;" >Columna 3</th>
                        <th style="text-align: center; background-color:#221969f7;" >Columna 4</th>
                        <th class="tituloCol" >Status en Base</th>
                        <th class="tituloCol" >Marca temporal</th>
                        <th class="tituloCol" >Dirección de correo electrónico</th>
                        <th class="tituloCol" >Es Sourcer</th>
                        <th class="tituloCol" >E-mail del candidato</th>
                        <th class="tituloCol" >IDs a enviar </th>
                        <th class="tituloCol" >Qué tecnologías maneja el candidato?</th>
                        <th class="tituloCol" >Qué perfil es el candidato?</th>
                        <th class="tituloCol" >LinkedIn del canditato (link)</th>
                        <th class="tituloCol" >Comentarios</th>
                        <th class="tituloCol" >CV Español candidato</th>
                        <th class="tituloCol" >Informe de entrevista Español candidato</th>
                        <th class="tituloCol" >CV Inglés candidato</th>
                        <th class="tituloCol" >Informe de entrevista Inglés candidato</th>
                        <th class="tituloCol" >Remuneración pretendida mensual</th>
                        <th class="tituloCol" >Nivel de Inglés</th>
                        <th class="tituloCol" >Locación</th>
                        <th class="tituloCol" >Nombre y apellido del candidato</th>
                        <th class="tituloCol" >Motivo rechazo</th>
                        <th class="tituloCol" >Acciones</th>
                    </tr>
                </thead>
                <tbody class="dataCol">
                    <tr>
                        <td>Row 1 Data 1</td>
                        <td>Row 1 Data 2</td>
                        <td>Row 1 Data 2</td>
                    </tr>
                    <tr>
                        <td>Row 2 Data 1</td>
                        <td>Row 2 Data 2</td>
                        <td>Row 2 Data 2</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>
    <footer class="footer">
        <p style="color: white; text-align:center ">2022 ConexionHR sistema </p>
    </footer>
    <script>
            $('#tableInfRevisar').DataTable({
            ajax: {
                "url":'http://127.0.0.1:5000/getInformesArevisar',
                dataSrc: '',
            columns: [
                { "data": 'Nombre y Apellido del Candidato' },
                { "data": 'Fecha' },
                { "data": 'ID' },
                { "data": 'Status en Base' },
                { "data": 'Marca temporal' },
                { "data": 'Dirección de correo electrónico' },
                { "data": '¿Es Sourcer? (Colocar Sí en caso de no haber entrevistado al Candidato)' },
                { "data": 'E-Mail Candidato' },
                { "data": 'IDs a Enviar a Cliente separados con "_" y sin la palabra "ID" y sin espacios' },
                { "data": '¿Qué tecnologías maneja el candidato?' },
                { "data": '¿Qué perfil es el Candidato?' },
                { "data": 'Linkedin del Candidato (Link)' },
                { "data": 'Comentarios' },
                { "data": 'CV Español Candidato' },
                { "data": 'Informe de Entrevista Español Candidato' },
                { "data": 'CV Inglés Candidato' },
                { "data": 'Informe de Entrevista Inglés Candidato' },
                { "data": 'Remuneración pretendida MENSUAL' },
                { "data": 'Nivel de Ingles' },
                { "data": 'Locación' },
                { "data": 'Motivo Rechazo' },
                { "data": "<input type='checkbox'/>" },

            ]},
         'columnDefs' : [

        { 'visible': false, 'targets': [0,1,2,3] }
    ]
        });
    </script>
    <script>
        $(document).ready(function () {
            $('#tableInfRevisar tbody').on('click', 'td #aprobar', function () {
                let td = document.getElementsByTagName('td')
                $.ajax({type: "POST",
        url: "http://127.0.0.1:5000/revisarAprobado",
	data: { 
        stEnBaseInf:td[1].textContent,
        emailInf:td[2].textContent,        
        esSourceInf:td[3].textContent,        
        emailCandiInf:td[4].textContent,             
        idInf:td[5].textContent,
        tecCandiInf:td[6].textContent,        
        tPCandiInf:td[7].textContent,        
        lkCandiInf:td[8].textContent,        
        comentInf:td[9].textContent,        
        cvEspInf:td[10].textContent,        
        infEntEsp:td[11].textContent,        
        cvIngInf:td[12].textContent,        
        infEntIng:td[13].textContent, 
        remuneracionPretendida:td[14].textContent, 
        nivelInglesInf:td[15].textContent, 
        locacionInf:td[16].textContent, 
        nombreCandiInf:td[17].textContent, 
        motivoRechInf:td[18].textContent, 
        status:'True',
       }
        })
    })
})

$(document).ready(function () {
            $('#tableInfRevisar tbody').on('click', 'td #rechazar', function () {
                let td = document.getElementsByTagName('td')
                $.ajax({type: "POST",
        url: "http://127.0.0.1:5000/revisarAprobado",
	data: { 
        stEnBaseInf:td[1].textContent,
        emailInf:td[2].textContent,        
        esSourceInf:td[3].textContent,        
        emailCandiInf:td[4].textContent,             
        idInf:td[5].textContent,
        tecCandiInf:td[6].textContent,        
        tPCandiInf:td[7].textContent,        
        lkCandiInf:td[8].textContent,        
        comentInf:td[9].textContent,        
        cvEspInf:td[10].textContent,        
        infEntEsp:td[11].textContent,        
        cvIngInf:td[12].textContent,        
        infEntIng:td[13].textContent, 
        remuneracionPretendida:td[14].textContent, 
        nivelInglesInf:td[15].textContent, 
        locacionInf:td[16].textContent, 
        nombreCandiInf:td[17].textContent, 
        motivoRechInf:td[18].textContent, 
        status:'False',
       }
        })
    })
})
    </script>
</body>
</html>